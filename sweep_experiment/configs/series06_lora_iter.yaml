# Series 6: LoRA -- Iteration Sweep
# Goal: Map overfitting curve for LoRA with best rank + LR.
# Fixed: lora_rank=BEST, lr=BEST, target_ffn=BEST
# Swept: num_steps, warmup_steps
# NOTE: Update after Series 3+4+5.

method: lora
series: 6
series_name: lora_iter_sweep
description: "LoRA iteration sweep at best rank/LR/target"
depends_on: [3, 4, 5]

fixed:
  lora_rank: 8        # PLACEHOLDER
  lora_alpha: 16      # PLACEHOLDER
  learning_rate: 2.0e-4  # PLACEHOLDER
  weight_decay: 0.01
  max_grad_norm: 1.0
  target_modules: "qkv,proj"
  target_ffn: false   # PLACEHOLDER
  num_cond_frames: 14
  num_frames: 28
  gen_start_frame: 32
  num_inference_steps: 50
  guidance_scale: 4.0
  resolution: 480p
  seed: 42
  max_videos: 100

sweep:
  - run_id: L13
    num_steps: 5
    warmup_steps: 1
  - run_id: L14
    num_steps: 10
    warmup_steps: 2
  - run_id: L15
    num_steps: 20
    warmup_steps: 3
  - run_id: L16
    num_steps: 40
    warmup_steps: 5
  - run_id: L17
    num_steps: 80
    warmup_steps: 10
