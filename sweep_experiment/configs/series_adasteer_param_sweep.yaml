# Series 29: AdaSteer Parameter Dimension Sweep
#
# Tests the full spectrum of parameter counts to find the exact
# sweet spot in the values-per-parameter ratio.
#
# Current evidence: G=1 (512 params) always wins. But is 512 already
# past the optimum? Maybe fewer params would work even better.
# And we haven't tested intermediate group counts (G=2, G=3).
#
# Using partial-dimension deltas (--delta-dim k), we learn only the
# first k dimensions of the 512-dim timestep embedding, zero-padding
# the rest. This lets us go below 512 params per group.
#
# Parameter counts and values/param ratios at 14 cond (~300K train values):
#   k=32,  G=1 →    32 params → 9,375 val/param
#   k=64,  G=1 →    64 params → 4,688 val/param
#   k=128, G=1 →   128 params → 2,344 val/param
#   k=256, G=1 →   256 params → 1,172 val/param
#   k=512, G=1 →   512 params →   586 val/param  ← current best
#   k=512, G=2 → 1,024 params →   293 val/param
#   k=512, G=3 → 1,536 params →   195 val/param
#   k=512, G=4 → 2,048 params →   146 val/param  ← overfits at 20 steps
#
# All runs use 5 steps (optimal) and lr=1e-2 at standard anchor (frame 32).

method: delta_b
series: 29
series_name: adasteer_param_sweep
description: "AdaSteer parameter dimension sweep: 32-dim to 3-group"

fixed:
  delta_steps: 5
  delta_lr: 1.0e-2
  num_groups: 1
  num_cond_frames: 14
  num_frames: 28
  gen_start_frame: 32
  num_inference_steps: 50
  guidance_scale: 4.0
  resolution: 480p
  seed: 42
  max_videos: 100
  es_check_every: 1
  es_patience: 5

sweep:
  # ── Sub-512: partial dimension sweep ──
  - run_id: PD32
    delta_dim: 32

  - run_id: PD64
    delta_dim: 64

  - run_id: PD128
    delta_dim: 128

  - run_id: PD256
    delta_dim: 256

  # ── 512 baseline (same as AS1, for direct comparison in this series) ──
  - run_id: PD512
    delta_dim: 512

  # ── Intermediate group counts (full 512-dim per group) ──
  - run_id: PG2
    num_groups: 2

  - run_id: PG3
    num_groups: 3
